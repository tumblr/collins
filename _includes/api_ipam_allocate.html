<h2>Allocate an Address</h2>

<table class="table table-condensed">
  <thead>
    <tr><td></td><td></td></tr>
  </thead>
  <tbody>
    <tr><th>Description</th><td>Create one or more addresses in a pool</td></tr>
    <tr><th>Request</th><td><code>PUT /api/asset/:tag/address</code></td></tr>
    <tr><th>Permission</th><td>controllers.IpAddressApi.allocateAddress</td></tr>
    <tr>
      <th>Parameters</th>
      <td>
        <table class="table table-hover table-condensed">
          <thead>
            <tr><td>Name</td><td>Type</td><td>Description</td></tr>
          </thead>
          <tbody>
            <tr>
              <th class="inlinecode">tag</th>
              <td>String</td>
              <td>Must be alphanumeric (but can include underscores and dashes)</td>
            </tr>
            <tr>
              <th class="inlinecode">count</th>
              <td>Option[Integer]</td>
              <td>Number of addresses to allocate. Must be between 1 and 10 if specified. Defaults to 1.</td>
            </tr>
            <tr>
              <th class="inlinecode">pool</th>
              <td>Option[String]</td>
              <td>The pool to allocate from. Values that are acceptable here depend on what address pool have been configured but common values would be none/empy (default pool), public (publicly routable IP address), backend (private addresses used for backend connectivity) or management (private addresses used for management connectivity)</td>
            </tr>
            <tr>
              <td colspan="3"><span class="label label-info">Note</span> By default no pools are configured. Your Collins administrator must tell you what pools are available for allocation or you can use the <a href="api.html#api-ipam-pools-section">pools API endpoint</a>.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th>Response Codes</th>
      <td>
        <table class="table-hover table-condensed">
          <thead>
            <tr><td>Code</td><td>Reason</td></tr>
          </thead>
          <tbody>
            <tr>
              <th class="inlinecode">201</th>
              <td>Address created</td>
            </tr>
            <tr>
              <th class="inlinecode">404</th>
              <td>Invalid asset specified</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

<div class="example collins-shell">
collins-shell ip_address allocate DEV --tag=tumblrtag1
</div>

<div class="example curl">
curl --basic -u blake:admin:first -X PUT -d pool=DEV http://localhost:9000/api/asset/tumblrtag1/address
</div>
<div class="panel-group" id="ipam-allocate-response">
  <div class="panel panel-default">
    <div class="panel-heading">
      <a class="panel-title collapsed" data-toggle="collapse" data-target="#ipam-allocate-json-response" href="#ipam-allocate-json-response">JSON Response</a>
    </div>
    <div id="ipam-allocate-json-response" class="panel-collapse collapse">
      <div class="panel-body">
        <pre>{
  "status": "success:created",
  "data": {
    "ADDRESSES": [
      {
        "ASSET_ID": 1,
        "ASSET_TAG": "tumblrtag1",
        "GATEWAY": "172.16.5.1",
        "ADDRESS": "172.16.5.4",
        "NETMASK": "255.255.255.0",
        "POOL": "DEV",
        "ID": 1
      }
    ]
  }
}</pre>
      </div>
    </div>
  </div>
</div>
